<!DOCTYPE html>
<html>
	<head>
		<script type="text/javascript" src="./javascripts/usernameCheck.js"></script>
		<!-- <script type="text/javascript">
			// The myTimer variable is initialized before it is used in the function
			var myTimer;
			function ajax_json_data(){
				var username_user = document.getElementById("username_user").value;
				var usernameMessage = document.getElementById("usernameMessage");

				// Create our XMLHttpRequest object
				var hr = new XMLHttpRequest();
				
				// Create some variables we need to send to our PHP file 
				var url = "json_mysql_data.php";
				
				hr.open("POST", url, true);
				
				// Set content type header information for sending url encoded variables in the request
				// Since we are using a POST request, the content type is set to: x-www-form-urlencoded
				hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
				
				// Access the onreadystatechange event for the XMLHttpRequest object
				hr.onreadystatechange = function() {
					if (hr.readyState == 4 && hr.status == 200) {
						// This is information from the server side through the AJAX request. This will give the HttpResponseText
						// JSON.parse() function will be used instead
						// The JSON.parse() function helps get it ready for javascript parsing. 
						var data = JSON.parse(hr.responseText);
						// console.log(data);
						// create a variable for the results div that information will be outputted to
						
						/* if (data.record.exist === username_user) {
							usernameMessage.innerHTML = "Username already exist, please try another one. "+data.record.exist;
						} else {
							usernameMessage.innerHTML = "Username does not exist, it can be used. "+data.record.exist;
						} */
						
						if (data.record.exist === 'empty') {
							usernameMessage.innerHTML = "No username was entered. "+data.record.exist;
						} else if (data.record.exist) {
							usernameMessage.innerHTML = "Username already exist, please try another one. "+data.record.exist;
						} else {
							usernameMessage.innerHTML = "Username does not exist, it can be used. "+data.record.exist;
						}
						
					}
				}
				
				// Send the data to PHP now... and wait for response to update the status div
				// When using post, a dynamic data can be sent through the send method. Here the variable is manually sent in.
				hr.send("username="+username_user); // Actually execute the request
				
				// You could use an animated.gif loader here while you wait for data from the server.
				usernameMessage.innerHTML = "requesting...";
				
				// This executes this function after 10 seconds.
				myTimer = setTimeout('ajax_json_data()',2000);
			}
		</script> -->
	</head>
	<body >
		<h3>Username Check</h3>
		Enter a username to check:
		<input type="text" id="username_user" onclick="usernameCheck()"/>
		<div id="usernameMessage" style="color:red;"/>
		<!-- <script type="text/javascript">ajax_json_data(); // This will make the function run. </script> -->
	</body>
</html>